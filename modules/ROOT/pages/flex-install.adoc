= Installing Flex Gateway
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../assets/images


You can install Flex Gateway as a Linux service, in a Docker container, or as a Kubernetes Ingress controller.

* If you want to run your Flex Gateway inside of a virtual machine (VM), install
it as a Linux service. 
* If you want try the product quickly or demonstrate some of the product's capabilities in a non-production
scenario, install it in a Docker container.
* If you want use Flex Gateway as a load balancer at the edge of a Kubernetes cluster,
install it as a Kubernetes Ingress controller.

[cols="1a,1a,1a"]
|===
|image:install-linux-logo.png[20%,20%,xref="flex-install.adoc#install-as-a-linux-service"]
|image:install-docker-logo.png[25%,25%,xref="flex-install.adoc#install-in-a-docker-container"]
|image:install-kubernetes-logo.png[20%,20%,xref="flex-install.adoc#install-as-a-kubernetes-ingress-controller"]

|xref:flex-install.adoc#install-as-a-linux-service[Install as a Linux Service]
|xref:flex-install.adoc#install-in-a-docker-container[Install in a Docker Container]
|xref:flex-install.adoc#install-as-a-kubernetes-ingress-controller[Install as a Kubernetes Ingress Controller]
|===

== Install as a Linux Service

The process of installing Flex Gateway as a Linux service includes the following tasks:

* Install dependencies
* Run the installation commands
* Verify successful installation

=== Before You Begin

Before getting started, ensure that you have installed the following: 

* link:https://curl.se/[curl] 
* link:https://www.vim.org/[vim]
* link:https://gnupg.org/[gnupg2]
* link:https://refspecs.linuxfoundation.org/LSB_3.0.0/LSB-PDA/LSB-PDA/lsbrelease.html[lsb-release]
* link:https://man7.org/linux/man-pages/man1/systemctl.1.html[systemctl]

=== Run Installation Commands

To install Flex Gateway as a Linux service:

Execute the command block below which does the following actions: 

* Retrieves the public package keys and adds the package repository
* Updates the package list
* Updates `apt-get`
* Installs the Flex Gateway package

+
[source,ssh]
----
curl -XGET https://flex-packages.anypoint.mulesoft.com/ubuntu/pubkey.gpg | sudo apt-key add -

echo "deb [arch=amd64] https://flex-packages.anypoint.mulesoft.com/ubuntu $(lsb_release -cs) main" \
| sudo tee /etc/apt/sources.list.d/mulesoft.list

sudo apt update

sudo apt install -y flex-gateway
----

== Install in a Docker Container 

To install Flex Gateway in a Docker container: 

. Download the Flex Gateway Docker image: 
+
[source,ssh,subs=attributes+]
----
docker pull mulesoft/flex-gateway
----

. Verify the installation was successful: 
+
[source,ssh]
----
docker images
----
+
You should see the Flex Gateway container image in the resulting list. 
+
[source,text,subs=attributes+]
----
REPOSITORY                   TAG               IMAGE ID       CREATED        SIZE
mulesoft/flex-gateway        {gateway-ver-var}     1c1fbdbf819b   9 days ago     334MB
----

== Install as a Kubernetes Ingress Controller

Before installing, ensure that you have installed:

* A tool to manage container images. The following example uses https://k3d.io/v5.0.0/#installation[k3d^].
// * A tool to create Kubernetes clusters. The following examples use https://k3d.io/v5.0.0/#installation[k3d^].
* https://kubernetes.io/docs/tasks/tools/#kubectl[kubectl^], a tool used to interact with Kubernetes clusters.
* https://helm.sh/docs/intro/install/[Helm^], a tool used to install Flex Gateway, monitoring tools, and applications. A minimum Helm version of 3.0.0 is required. 
+
Refer to the <<helm-chart-options,Helm Chart Configuration Options>> for information about customizing the chart.

To install Flex Gateway as a Kubernetes ingress controller:

[]
. Download the Flex Gateway container image: 
+
[source,ssh,subs=attributes+]
----
docker pull mulesoft/flex-gateway
----

== See Also

* xref:flex-gateway-getting-started.adoc[Get Started with Flex Gateway]
* xref:flex-conn-reg-run.adoc[Register and Run in Connected Mode]
* xref:flex-local-reg-run.adoc[Register and Run in Local Mode]
